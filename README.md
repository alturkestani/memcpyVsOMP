# memcpyVsOMP
Studying the difference between memcpy and parallel copy using OMP


Use the attached makefile to compile. 

To run on a system with a slurm dispatcher use:

export KMP_AFFINITY=scatter,1,0,granularity=fine
export OMP_NUM_THREADS=32   // or whatever your number of physical cores are 

srun --hint=nomultithread --cpus-per-task=32 -n 1  ./benchmark


#######
Output example

OMP Threads 32
Array size (GiB), Memcpy throughput (GiB/s), OMP throughput (GiB/s)
0.000000003725, 0.0015, 0.0024
0.000000007451, 0.0000, 0.0052
0.000000014901, 0.0000, 0.0139
0.000000029802, 0.0000, 0.0312
0.000000059605, 0.1000, 0.0417
0.000000119209, 0.2500, 0.0476
0.000000238419, 0.0000, 0.1538
0.000000476837, 0.0000, 0.0354
0.000000953674, 0.0000, 0.4706
0.000001907349, 4.0000, 0.7619
0.000003814697, 6.4000, 1.5238
0.000007629395, 8.0000, 3.7647
0.000015258789, 4.9231, 4.9231
0.000030517578, 6.0952, 12.1905
0.000061035156, 6.7368, 20.4800
0.000122070312, 7.5852, 30.1176
0.000244140625, 7.8769, 44.5217
0.000488281250, 8.0789, 57.6901
0.000976562500, 8.2414, 70.0171
0.001953125000, 7.8618, 55.7279
0.003906250000, 8.0969, 77.2830
0.007812500000, 8.2758, 79.7275
0.015625000000, 8.4166, 86.8026
0.031250000000, 14.5450, 85.9770
0.062500000000, 14.6029, 90.0529
0.125000000000, 14.6114, 97.0095
0.250000000000, 14.5793, 99.1467
0.500000000000, 14.5745, 97.6260
1.000000000000, 14.5964, 97.6896
2.000000000000, 14.7505, 98.4278
4.000000000000, 14.8333, 101.4403
8.000000000000, 14.9102, 102.0590
16.000000000000, 14.9562, 102.3568
32.000000000000, 14.9844, 102.3209


